<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:b="http://bootsfaces.net/ui">
<h:body>
	<ui:composition template="/pages/template.xhtml">
		<ui:define name="content">
			<b:panel rendered="#{profileBean.hasRole('subscriber')}" title="Buchung" collapsible="false">
				<b:alert severity="info" closable="true">
					Für alle Freizeiten gelten diese <a href="http://www.crg-reisen.de/agbs/" target="_blank">AGB</a>
				</b:alert>
				<b:form>
					<h:outputText value="Du hast dich für folgende Freizeiten angemeldet:" />
					<b:dataTable value="#{subscriberModel.camps}" var="c" lang="de">
						<b:dataTableColumn label="Storno">
							<h:outputText value="nur schriftlich" rendered="#{c.accept}" />
							<b:dropButton value="stornieren" iconAwesome="trash-o" look="danger" rendered="#{!c.accept}" >
								<b:commandButton action="#{subscriberController.doDelete(c)}" value="ja, jetzt unwiederbringlich stornieren"
									look="danger" />
							</b:dropButton>
						</b:dataTableColumn>
						<b:dataTableColumn label="Teilnehmer">
						  <h:outputText value="#{c.fullname}" />
						</b:dataTableColumn>
						<b:dataTableColumn label="Freizeit">
							<h:outputText value="#{c.campname} #{c.camptime}" />
						</b:dataTableColumn>
						<b:dataTableColumn label="Ort">
							<a href="#{c.url}" target="_blank"> <h:outputText value="#{c.locationname}" /></a>
						</b:dataTableColumn>
						<b:dataTableColumn label="Dokumente">
							<h:outputText value="Die Bestätigungsdokumente sind erst nach der offiziellen Bestätigung einsehbar."
								rendered="#{!c.accept}" />
							<h:outputText
								value="Dir wurde ein Freizeitplatz reserviert. Bitte fülle die hier downloadbaren Formulare vollständig aus und schicke sie zügig an uns zurück."
								rendered="#{c.accept}" />
							<b:commandButton action="#{subscriberController.toEdit(c)}" value="bearbeiten" look="warning" iconAwesome="pencil" rendered="#{!c.accept}" />
							<h:dataTable value="#{c.documents}" var="d" rendered="#{c.accept}">
								<h:column>
									<b:commandButton action="#{subscriberController.doDownloadDocument(d)}" value="#{d.name}" iconAwesome="download" />
								</h:column>
							</h:dataTable>
						</b:dataTableColumn>
					</b:dataTable>
				</b:form>
			</b:panel>
		</ui:define>
	</ui:composition>
</h:body>
</html>